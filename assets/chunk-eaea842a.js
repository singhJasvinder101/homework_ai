import{r as t,j as s,c as m,R as p}from"./chunk-bdfe01d7.js";import"./chunk-725317a4.js";const h=()=>{const[r,c]=t.useState(!1),[o,n]=t.useState(0),[f,i]=t.useState(""),[d,l]=t.useState(!1);t.useEffect(()=>{chrome.storage.sync.get("darkMode",e=>{e.darkMode!==void 0&&c(e.darkMode)})},[]),t.useEffect(()=>{const e=document.body;r?e.classList.add("dark-mode"):e.classList.remove("dark-mode"),chrome.storage.sync.set({darkMode:r})},[r]);const u=()=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0].id&&(console.log("starting ",e[0].id),chrome.tabs.sendMessage(e[0].id,{action:"START_OCR"}))})};return t.useEffect(()=>{const e=a=>{a.action==="OCR_PROGRESS"?n(a.progress*100):a.action==="OCR_RESULT"&&i(a.text)};return chrome.runtime.onMessage.addListener(e),()=>{chrome.runtime.onMessage.removeListener(e)}},[]),t.useEffect(()=>{const e=setTimeout(()=>{l(!0),setTimeout(()=>{window.close()},300)},3e4);return()=>clearTimeout(e)},[]),s.jsxs("div",{className:`popup-container ${r?"dark-mode":""} ${d?"closing":""}`,children:[s.jsx("header",{className:"popup-header",children:s.jsx("h1",{children:"OCR Extension"})}),s.jsxs("main",{className:"popup-content",children:[s.jsx("button",{className:"start-ocr-button",onClick:u,children:"Start OCR Selection"}),o>0&&o<100&&s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar",style:{width:`${o}%`},role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"})})]})]})};m.createRoot(document.getElementById("app")).render(s.jsx(p.StrictMode,{children:s.jsx(h,{})}));
